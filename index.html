<!DOCTYPE html>
<html>
	<head>
		<title>我的XX</title>
		<link rel="stylesheet" type="text/css" href="main.css">
		<!-- <link rel="stylesheet" href="loading.css"> -->

		<script src="//at.alicdn.com/t/font_720742_x5c8142r1d.js"></script>

		<style type="text/css">

			/*loading界面*/
			.loading{
  				width:200px;
  				height:200px;
 			 	position:relative;
			}
			.loading::before,.loading::after{
  				content:'';
 		 		position:absolute;
  				width:10px;
  				height:10px;
  				background: #000;
  				border-radius:50%;
  				position:absolute;
  				top:0;
  				right:0;
  				bottom:0;
  				left:0;
  				margin : auto;
  				animation: s linear 1.5s infinite;
			}
			.loading::after{
  				animation-delay:0.75s;
			}
			/*导航li的动画*/
			@keyframes s{
  				0%{
    				width:0px;height:0px; opacity:1;
 			 	}
  				100%{
   					width:100px;height:100px;opacity:0;
 				}
			}
			
			.icon {
			   width: 1em; height: 1em;
			   vertical-align: -0.15em;
			   fill: currentColor;
			   overflow: hidden;
			}

			.site-welcome{
				display: none;
				position: fixed;
				top: 0;left: 0;width:100%;height: 100%;
				background: #686868;
				z-index: 1;
				justify-content: center;
				align-items: center;
			}
			.site-welcome.active{
				display: flex;
			}
		</style>
	</head>

	<body>

		<div id="siteWelcome" class="site-welcome active">
			<div class="loading"></div>
		</div>

		<div id="topNavBar" class="topNavBar">
			<div class="topNavBar-inner clearfix">
				<a href="#" class="logo">
					<span class="rs">RS</span><span class="card">card</span>
				</a>
				<nav class="menu">
					<ul class="clearfix">
						<li><a href="#siteAbout">关于</a></li>
						<li><a href="#siteSkills">技能</a></li>
						<li>
							<a  href="#siteWorks"><span>作品</span></a>
							<ul class="submenu">
								<li>作品1</li>
								<li>作品2</li>
								<li>作品3</li>
							</ul>
						</li>
						<li>
							<a  href="#">博客</a>
							<ul class="submenu">
								<li>博客1</li>
								<li>博客2</li>
								<li>博客3</li>
							</ul>
						</li>
						<li><a href="#">日历</a></li>
						<li><a href="#">联系方式</a></li>
						<li><a href="#">其他</a></li>
					</ul>
				</nav>
			</div>	
		</div>
		<div class="banner">
			<div class="mask">

			</div>
		</div>
		<main class="card">
			<div data-x id="siteAbout" class="userCard">
				<div class="pictureAndText clearfix">
					<div class="picture">
						<img src="./img/avatar.jpg" alt="头像">
					</div>
					<div class="text">
						<span class="welcome">Hello
							<span class="triangle">
								
							</span>
						</span>
						<h1>张永旺</h1>
						<p>开发工程师</p>
						<hr>
						<dl>
							<dt>年龄</dt>
							<dd>18</dd>
							<dt>所在城市</dt>
							<dd>北京</dd>
							<dt>邮箱</dt>
							<dd>20225614@qq.com</dd>
							<dt>手机</dt>
							<dd>12345678</dd>
						</dl>
					</div>
				</div>		
				<footer class="media">
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-github1"></use>
							</svg>
					    </a>
						<a href="#">
								<svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-twitter"></use>
								</svg>
						</a>
						<a href="#">
								<svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-jianshu"></use>
								</svg>
						</a>
						<a href="#">
								<svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-7"></use>
								</svg>
						</a>
						<a href="#">
								<svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-yingdaicon04"></use>
								</svg>
						</a>
				</footer>
			</div>
			<p class="downloadResume-wrapper">
				<a href="./resume_pdf.pdf" class="downloadResume" target="_blank" download=>下载PDF简历</a>
			</p>
			
			<p class="selfIntroduction">
				张永旺，前端开发工程师<br>
				技能：前端开发 <br>
				擅长：HTML\CSS\JavaScript\ <br>
				Stng background in project management and customer relations.
			</p>
		</main>
		<section data-x id="siteSkills" class="skills">
			<h2>技能</h2>
			<ol class="clearfix">
				<li>
					<h3>HTML5 &amp; CSS3</h3>
					<div class="progressBar">
						<div class="progress html"></div>
					</div>
				</li>
				<li>
						<h3>JavaScript</h3>
						<div class="progressBar">
							<div class="progress"></div>
						</div>
				</li>
				<li>
						<h3>jQuery</h3>
						<div class="progressBar">
							<div class="progress"></div>
						</div>
				</li>
				<li>
						<h3>VUE.js</h3>
						<div class="progressBar">
							<div class="progress"></div>
						</div>
				</li>
				<li>
						<h3>React.js</h3>
						<div class="progressBar">
							<div class="progress"></div>
						</div>
				</li>
				<li>
						<h3>Node.js</h3>
						<div class="progressBar">
							<div class="progress"></div>
						</div>
				</li>
			</ol>
		</section>
		<section data-x id="siteWorks" class="portfolio">
			<h2>作品集合</h2>
			<nav>
				<ol class="clearfix">
					<li id="portfolio1">所有</li>
					<li id="portfolio2">框架</li>
					<li id="portfolio3">原生JS&amp;CSS</li>
				</ol>
				<div id="portfolioBar" class="bar state-1">
					<div class="bar-inner">

					</div>
				</div>
			</nav>
			
			<div class="works">
				<div class="big" style="top: 0;left: 0;">
					<img src="./img/1.jpg" alt="作品1">
				</div>
				<div class="small" style="top: 0;left:645px ;">
					<img src="./img/2.jpg" alt="作品2">
				</div>
				<div class="small" style="top: 228px;left: 645px;">
					<img src="./img/3.jpg" alt="作品3">
				</div>
			</div>
		</section>
		<!-- <script src="//at.alicdn.com/t/font_720742_x5c8142r1d.js"></script> -->
		<script>
				portfolio1.onclick=function(){
					portfolioBar.className = 'bar state-1';
				}
				portfolio2.onclick=function(){
					portfolioBar.className = 'bar state-2';
				}
				portfolio3.onclick=function(){
					portfolioBar.className = 'bar state-3';
				}
		</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
		<script>
			//loading界面
			setTimeout(function(){
				siteWelcome.classList.remove('active');
			},1500)

			//会动的topNavBar
			window.onscroll = function(x){
				if(window.scrollY > 0){
					topNavBar.classList.add('sticky')
				}else{
					topNavBar.classList.remove('sticky')
				}
				
				let specialTags = document.querySelectorAll('[data-x]')
				let minIndex = 0
				for(let i = 1 ; i<specialTags.length;i++){
					if(Math.abs(specialTags[i].offsetTop-window.scrollY)<Math.abs(specialTags[minIndex].offsetTop-window.scrollY)){
						minIndex = i 
					}
				}
				for(let i = 0;i<specialTags.length;i++){
					specialTags[i].classList.remove('active')
				}
				specialTags[minIndex].classList.add('active')

				let id = specialTags[minIndex].id
				let a = document.querySelector('a[href="#' + id +'"]')
				let li = a.parentNode
				let brotherAndMe = li.parentNode.children
				for(let i = 0;i<brotherAndMe.length;i++){
					brotherAndMe[i].classList.remove('active')
				}
				li.classList.add('active')
				console.log(li);
			}

			
			//下拉菜单
			let liTags = document.querySelectorAll(' nav.menu > ul >li ');

			for(let i = 0 ;i<liTags.length; i++){
				liTags[i].onmouseenter = function(x){
					x.currentTarget.classList.add('active')
				}
				liTags[i].onmouseleave = function(x){
					x.currentTarget.classList.remove('active')
				}
			}

			//点击跳转
			let aTags =document.querySelectorAll('nav.menu > ul > li > a')

			// Setup the animation loop.
			function animate(time) {
    		requestAnimationFrame(animate);
    		TWEEN.update(time);
			}
			requestAnimationFrame(animate);


	

			for(let i = 0; i<aTags.length;i++){
				aTags[i].onclick = function(x){
					x.preventDefault()
					// let a = x.currentTarget
					// let href = a.getAttribute('href') //'#siteAbout'
					// let element = document.querySelector(href);
					// let top = element.offsetTop
					let top = document.querySelector(x.currentTarget.getAttribute('href')).offsetTop
					let currentTop = window.scrollY
					let targetTop = top - 80 
					let s = targetTop - currentTop;
				
					var coords = { y: currentTop}; 
					var t = Math.abs((s/100)*300)
					if(t > 500){
						t = 500
					}
					var tween = new TWEEN.Tween(coords) 
      	  			.to({ y:targetTop},t ) 
        			.easing(TWEEN.Easing.Quadratic.InOut) 
        			.onUpdate(function() { 
        				window.scrollTo(0,coords.y)
        			})
        			.start(); 
				}
			}
		</script>
	</body>
</html>
